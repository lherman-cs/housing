(this.webpackJsonphousing=this.webpackJsonphousing||[]).push([[0],{287:function(e,n,t){e.exports=t(425)},425:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(18),i=t.n(o),u=t(17),c=t.n(u),l=t(164),s=t(77),h=t(220),p=t(21),m=t(15),f=t(495),y=t(489),d=t(496),b=t(497),v=t(498),g=t(499),w=t(507),k=t(501),E=t(502),C=t(500),j=t(430),x=t(503),O=t(504),S=t(16),A=t(237),P=t(236),R=t(426),T=t(488),H=t(490),I=t(429),F=t(508),B=t(491),N=t(492),W=t(446),V=t(443),$=t(509),G=t(493),L=t(27),M=function(){function e(n,t){Object(m.a)(this,e),this.amount=n,this.period=t}return Object(S.a)(e,[{key:"fromCSV",value:function(n){if(!("amount"in n)||!("period"in n))throw Error("Parse error: amount and period have to exist");var t=["yearly","monthly"],a=Number(n.amount);if(!t.includes(n.period))throw Error("Parse error: period should be one of [".concat(t.join(", "),"], but got ").concat(n.period));return new e(a,n.period)}},{key:"to",value:function(e){switch(e){case"monthly":return this.monthly();case"yearly":return this.yearly()}}},{key:"monthly",value:function(){var e=this.amount;return"yearly"===this.period&&(e/=12),e}},{key:"yearly",value:function(){var e=this.amount;return"monthly"===this.period&&(e*=12),e}},{key:"update",value:function(e,n){var t=this.to(e);this.amount=n(t),this.period=e}},{key:"clone",value:function(){return new e(this.amount,this.period)}}]),e}(),z=function(e){return e},U=function(){function e(n,t){Object(m.a)(this,e),this.amount=n,this.rate=t}return Object(S.a)(e,[{key:"generator",value:c.a.mark((function e(n){var t,a,r,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>1&&void 0!==o[1]?o[1]:z,a=o.length>2&&void 0!==o[2]?o[2]:z,r=this.amount;case 3:return r=t(r),r*=1+this.rate.to(n),r=a(r),e.next=9,r;case 9:e.next=3;break;case 11:case"end":return e.stop()}}),e,this)}))},{key:"update",value:function(e,n,t){this.amount=e,this.rate.update(t,(function(e){return n}))}},{key:"clone",value:function(){return new e(this.amount,this.rate.clone())}}]),e}();function D(e,n){for(var t in e){var a=e[t];a&&"function"===typeof a.clone?n[t]=a.clone():n[t]=a}return n}var J=c.a.mark(le),Y=c.a.mark(se),q=function(){function e(){Object(m.a)(this,e),this.principle=new U(1e5,new M(.06,"yearly")),this.contribution=new M(18e3,"monthly"),this.totalGain=0}return Object(S.a)(e,[{key:"clone",value:function(){return D(this,new e)}}]),e}(),X=function(){function e(){Object(m.a)(this,e),this.property=new M(.01,"yearly"),this.householdIncome=new M(22e4,"yearly"),this.capitalGainsRate=.15,this.filingStatus="joint",this.marginalIncomeTaxRate=.24}return Object(S.a)(e,[{key:"clone",value:function(){return D(this,new e)}}]),e}(),K=function(){function e(){Object(m.a)(this,e),this.term=30,this.principle=new U(2e5,new M(.03,"yearly"))}return Object(S.a)(e,[{key:"clone",value:function(){return D(this,new e)}}]),e}(),Q=function(){function e(){Object(m.a)(this,e),this.plan="house",this.downPayment=5e4,this.chargeForRoom=new M(600,"monthly"),this.chargeForRoomIncrease=new M(.03,"yearly"),this.extraBedrooms=0,this.utilityCost=new M(100,"monthly"),this.insurance=new M(85,"monthly"),this.house=new Z,this.rental=new _}return Object(S.a)(e,[{key:"clone",value:function(){return D(this,new e)}}]),e}(),Z=function(){function e(){Object(m.a)(this,e),this.repairCost=new M(500,"yearly"),this.housePrice=25e4,this.growthRate=new M(.04,"yearly"),this.hoaFee=new M(250,"monthly"),this.loan=new K,this.buyClosingCosts=.04,this.sellClosingCosts=.06}return Object(S.a)(e,[{key:"clone",value:function(){return D(this,new e)}}]),e}(),_=function(){function e(){Object(m.a)(this,e),this.paymentIncrease=new M(.04,"yearly"),this.payment=new M(900,"monthly")}return Object(S.a)(e,[{key:"clone",value:function(){return D(this,new e)}}]),e}(),ee=function(){function e(){Object(m.a)(this,e),this.housing=new Q,this.investment=new q,this.taxes=new X,this.inflation=new M(.02,"yearly")}return Object(S.a)(e,[{key:"clone",value:function(){return D(this,new e)}}]),e}(),ne=function(){function e(){Object(m.a)(this,e),this.data=new ee,this.netWorth=0}return Object(S.a)(e,[{key:"clone",value:function(){return D(this,new e)}}]),e}();function te(e,n){var t=[];return n=n?"(".concat(n,")"):"",function(a,r){var o=e(a,r);return t.push("Changes in state on month ".concat(r," ").concat(n,":")),function e(n,a,r){if("object"===typeof a)for(var o in a)r.push(o),e(n[o],a[o],r),r.pop();else n!==a&&t.push("\t".concat(r.join("."),": ").concat(n," -> ").concat(a))}(a,o,[]),console.debug(t.join("\n")),t.length=0,o}}function ae(e,n){if(!e)throw new Error(": "+n)}function re(e,n){e||console.warn(": "+n)}var oe=function(e){return function(n){return(1+e)*n}};function ie(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e,t){var a,r=Object(L.a)(n);try{for(r.s();!(a=r.n()).done;){e=(0,a.value)(e,t)}}catch(o){r.e(o)}finally{r.f()}return e}}function ue(){return ie((function(e,n){var t=e.data,a=t.investment.contribution,r=t.investment.principle.rate,o=t.investment.principle.amount;ae(o>=0,"base is negative");var i=he(o,r.monthly()),u=e.clone();return u.data.investment.principle.amount=i+a.monthly(),u.data.investment.totalGain+=i-o,u}),(function(e,n){var t,a,r,o=e.data.housing,i=e.data.investment,u=o.chargeForRoom.monthly()*o.extraBedrooms;if(i.principle.amount+=u-o.insurance.monthly()-o.utilityCost.monthly(),ae(i.principle.amount>0,"Not enough money to cover up housing expenses"),n%12===0){var c=oe(e.data.inflation.yearly());o.chargeForRoom.update("monthly",oe(o.chargeForRoomIncrease.yearly())),o.insurance.update("monthly",c),o.utilityCost.update("monthly",c)}switch(o.plan){case"house":r=o.house,t=function(e,n){var t=-pe(r.loan).monthly()-r.repairCost.monthly()-r.hoaFee.monthly()-e.data.taxes.property.monthly()*r.housePrice,a=e.clone();a.data.investment.principle.amount+=t,ae(a.data.investment.principle.amount>0,"Not enough money to cover up house expenses");var o=a.data.housing.house;if(o.housePrice=he(o.housePrice,o.growthRate.monthly()),n%12===0){var i=oe(a.data.inflation.yearly());o.repairCost.update("monthly",i),o.hoaFee.update("monthly",i)}return a};break;case"rental":a=o.rental,t=function(e,n){var t=e.clone();return t.data.investment.principle.amount-=a.payment.monthly(),n%12===0&&t.data.housing.rental.payment.update("monthly",oe(a.paymentIncrease.yearly())),t};break;default:throw new Error("Unsupported plan")}return t(e,n)}),function(){var e=0;return function(n,t){if("rental"===n.data.housing.plan)return n;var a=n.data.taxes,r=function(e){var n=e.principle.amount,t=pe(e).monthly(),a=n*e.principle.rate.monthly(),r=t-a,o=n-r;n<r&&(o=0);return{interestPaid:a,newPrinciple:o}}(n.data.housing.house.loan),o=r.interestPaid,i=r.newPrinciple;e+=o;var u=n.clone();if(u.data.housing.house.loan.principle.amount=i,t%12===0){var c=u.data.investment.principle;c.amount+=e*a.marginalIncomeTaxRate,e=0,c.amount+=a.property.yearly()*a.marginalIncomeTaxRate}return u}}())}function ce(e){return ie(function(e){var n=e.data.housing.house.housePrice;return function(e,t){if("house"!==e.data.housing.plan)return e;var a=e.clone(),r=a.data.housing.house.loan.principle.amount,o=a.data.housing.house.sellClosingCosts,i=a.data.housing.house.housePrice,u=i*o+r,c=i-n,l=a.data.taxes.capitalGainsRate,s="joint"===a.data.taxes.filingStatus?5e5:25e4;return c>s&&(c=s+(c-s)*(1-l)),a.netWorth+=n+c-u,a}}(e),(function(e,n){var t=e.clone(),a=t.data.investment,r=t.data.taxes.capitalGainsRate;return t.netWorth+=a.totalGain*(1-r)+a.principle.amount-a.totalGain,t}))}function le(e,n){var t;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=new ne).data=e.clone(),a.delegateYield(se(t,n,{ongoing:te(ue(),"ongoing"),post:te(ce(t),"post")}),"t0",3);case 3:case"end":return a.stop()}}),J)}function se(e,n,t){var a,r,o,i,u;return c.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e=e.clone(),a=e.data.housing.house.loan,r=e.data.housing,o=e.data.investment,a.principle.amount=r.house.housePrice-r.downPayment,i=0,"house"===r.plan&&(i=r.house.housePrice*r.house.buyClosingCosts),o.principle.amount-=r.downPayment+i,ae(o.principle.amount>0,"Initial investment principle is not enough to cover up down payment"),u=1;case 10:if(!(u<=n)){c.next=17;break}return e=t.ongoing(e,u),c.next=14,t.post(e,u);case 14:u++,c.next=10;break;case 17:case"end":return c.stop()}}),Y)}function he(e,n){return re(n>=0&&n<=1,"rate is not between 0 and 1"),e*(1+n)}function pe(e){var n=12*e.term,t=e.principle.rate.monthly(),a=t*Math.pow(1+t,n),r=Math.pow(1+t,n)-1;return new M(e.principle.amount*a/r,"monthly")}function me(e,n,t){var a=[];return function e(n,t,o){Object.keys(t).filter((function(e){return"function"!==typeof t[e]})).filter((function(e){return n[e]})).forEach((function(i){var u=t[i];if("string"===typeof u||u instanceof String||"number"===typeof u||u instanceof Number||u instanceof M){var c=n[i],l=function(e,n){return{HousingNumber:function(t,a){return function(r){e[t]=new M(Number(r.target.value),a),n(e)}},Number:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(t){return function(a){e[t]=Number(a.target.value),n(e)}})),String:function(t){return function(a){e[t]=a.target.value,n(e)}}}}(t,o),s=c.period;if(u instanceof M&&!s)throw new Error("".concat(i,' is a housing number. "period" is required'));a.push([r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{variant:"filled"},r.a.createElement(T.a,{label:c.label,type:c.inputType,value:u instanceof M?u.to(s):u,onChange:l[u.constructor.name](i,c.period),InputProps:{startAdornment:c.startAdornment&&r.a.createElement(H.a,{position:"start"},c.startAdornment),endAdornment:c.endAdornment&&r.a.createElement(H.a,{position:"end"},c.endAdornment)}}),r.a.createElement(I.a,null,c.helper)),r.a.createElement("br",null)),c.rank])}else e(n[i],t[i],(function(e){t[i]=e,o(t)}))}))}(e,n,t),r.a.createElement("div",null,a.sort((function(e,n){return e[1]-n[1]})).map((function(e){return e[0]})))}var fe=function(e){Object(A.a)(t,e);var n=Object(P.a)(t);function t(){var e;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).label="",e}return Object(S.a)(t,[{key:"clone",value:function(){return D(this,new t)}}]),t}(ee);function ye(e){var n=e.initialData,t=e.onSubmit,a=e.onClose,o=e.open,i=r.a.useState(n),u=Object(p.a)(i,2),c=u[0],l=u[1];r.a.useEffect((function(){l(n)}),[n]);var s=me(function(e){var n={label:{rank:1,label:"Label",helper:"Logical label for the simulation",inputType:"text"},investment:{principle:{amount:{rank:2,label:"Investment Principle",helper:"How much money do you have currently (we expect you to take your down payment out of this money)",inputType:"number",startAdornment:"$"},rate:{rank:2,label:"Average Return",helper:"What is the annual average rate of return of your portfolio?",inputType:"number",endAdornment:"%",period:"yearly"}},contribution:{rank:3,label:"Monthly Contribution",helper:"How much do you contribute to your principle each month?",inputType:"number",startAdornment:"$",period:"monthly"}},inflation:{rank:4,label:"Inflation",helper:"How much inflation per year?",inputType:"number",endAdornment:"%",period:"yearly"},housing:{downPayment:{rank:5,label:"Upfront Costs",helper:"e.g. move-in fees, non-refundable fees, pizza + beer for your friends who helped you move",inputType:"number",startAdornment:"$"},extraBedrooms:{rank:5,label:"Spare Rooms",helper:"How much you plan to charge for each spare room(s)",inputType:"number"},chargeForRoom:{rank:5,label:"Charge per Room",helper:"",inputType:"number",period:"monthly"},chargeForRoomIncrease:{rank:5,label:"Charge for room increase per year?",helper:"How much you plan to increase the rent for your spare room(s) each year",inputType:"number",endAdornment:"%",period:"yearly"}}};switch(e){case"house":n.housing.house={repairCost:{rank:6,label:"Annual Repair Cost",helper:"How much you expect to spend annually on home repairs",inputType:"number",startAdornment:"$",period:"yearly"},housePrice:{rank:6.1,label:"House Price",helper:"How much you expect to pay for the home",inputType:"number",startAdornment:"$"},buyClosingCosts:{rank:6.2,label:"Buying Closing Costs",helper:"How much you expect to pay for closing costs when buying the home(percent)",inputType:"number",endAdornment:"%"},sellClosingCosts:{rank:6.3,label:"Selling Closing Costs",helper:"How much you expect to pay for closing costs when selling the home(percent)",inputType:"number",endAdornment:"%"},growthRate:{rank:6.4,label:"Home Value Appreciation",helper:"How much you expect home value to go up each year",inputType:"number",endAdornment:"%",period:"yearly"},hoaFee:{rank:6.5,label:"HOA Fee",helper:"Home Owner's Association Monthly Fee",inputType:"number",startAdornment:"$",period:"monthly"}};break;case"rental":n.housing.rental={payment:{rank:6.1,label:"Monthly Rent Payment",helper:"How much do you pay rent every month?",inputType:"number",startAdornment:"$",period:"monthly"},paymentIncrease:{rank:6.2,label:"Payment Increase Rate",helper:"How much you expect rent to go up annually",inputType:"number",endAdornment:"%",period:"yearly"}};break;default:throw new Error("Unsupported plan: ".concat(e))}return n}(c.housing.plan),c,(function(e){return l(e.clone())}));return r.a.createElement(F.a,{open:o,onClose:a,"aria-labelledby":"form-dialog-title"},r.a.createElement(B.a,{id:"form-dialog-title"},"Subscribe"),r.a.createElement(N.a,null,r.a.createElement(R.a,null,r.a.createElement(W.a,{id:"select-housing-type"},"Housing Type"),r.a.createElement(V.a,{labelId:"select-housing-type",value:c.housing.plan,onChange:function(e){var n=e.target.value;c.housing.plan=n,l(c.clone())}},r.a.createElement($.a,{value:"house"},"House"),r.a.createElement($.a,{value:"rental"},"Apartment")),r.a.createElement(I.a,null,"Select housing type to compare")),s),r.a.createElement(G.a,null,r.a.createElement(j.a,{onClick:a,color:"primary"},"Cancel"),r.a.createElement(j.a,{color:"primary",onClick:function(){return t(c)}},"Submit")))}var de=t(225);function be(e){var n=e.data,t=e.years;return t||(t=30),r.a.createElement(de.a,{data:n.map((function(e){return function(e,n){for(var t=12*n,a=le(e,t),r=[],o=1;o<=t;o++){var i=a.next();if(i.done)break;o%12===0&&r.push(i.value)}return{id:e.label,data:r.map((function(e,n){return{x:n+1,y:e.netWorth}}))}}(e,t)})),margin:{top:50,right:110,bottom:50,left:80},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},axisTop:null,axisRight:null,axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:"Years",legendOffset:36,legendPosition:"middle"},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:"Net Worth",legendOffset:-70,legendPosition:"middle"},colors:{scheme:"nivo"},pointSize:10,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},pointLabel:"y",pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})}function ve(e,n){for(var t=e.split("\n").map((function(e){return e.split(",")})),a=t[0],r={},o=0;o<a.length;o++)for(var i=a[o].split(".").slice(1),u=r,c=0;c<i.length;c++){var l=i[c];l in u||(u[l]=c===i.length-1?o:{}),u=u[l]}function s(e,n){for(var t in e){var a=e[t];"number"===typeof a?e[t]=n[a]:s(a,n)}return e}function h(e,n,t){if(e)for(var a in t){var r,o=t[a];if("function"!==typeof o.fromCSV)switch(r=typeof o){case"number":e[a]=Number(n[a]);break;case"boolean":e[a]=Boolean(n[a]);break;case"string":e[a]=n[a];break;case"object":h(e[a],n[a],o);break;default:throw Error("Unsupported type: ".concat(r))}else e[a]=o.fromCSV(n[a])}}for(var p=t.slice(1),m=[],f=0;f<p.length;f++){var y=n.clone(),d=JSON.parse(JSON.stringify(r));s(d,p[f]),h(y,d,n),m.push(y)}return m}var ge=function e(n){Object(m.a)(this,e),this.selected=!0,this.data=void 0,n||(n=new fe),this.data=n};var we=function(){var e=r.a.useState(!1),n=Object(p.a)(e,2),t=n[0],a=n[1],o=r.a.useState([]),i=Object(p.a)(o,2),u=i[0],m=i[1],S=r.a.useState(-1),A=Object(p.a)(S,2),P=A[0],R=A[1],T=r.a.useState(new fe),H=Object(p.a)(T,2),I=H[0],F=H[1],B=u.filter((function(e){return e.selected})).map((function(e){return e.data}));function N(){return(N=Object(h.a)(c.a.mark((function e(n){var t,a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.target.files){e.next=3;break}return e.abrupt("return");case 3:if(a=t[0]){e.next=6;break}return e.abrupt("return");case 6:(r=new FileReader).onload=function(){m(ve(r.result,new fe).map((function(e){return new ge(e)})))},r.readAsText(a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("div",{style:{height:"40vh",width:"100%"}},r.a.createElement(be,{data:B,years:50})),r.a.createElement(f.a,{component:y.a},r.a.createElement(d.a,null,r.a.createElement(b.a,null,r.a.createElement(v.a,null,r.a.createElement(g.a,{padding:"checkbox"},r.a.createElement(w.a,{checked:B.length>0&&B.length===u.length,onChange:function(e){return n=e.target.checked,void m(u.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{selected:n})})));var n},inputProps:{"aria-label":"select all desserts"}})),r.a.createElement(g.a,{align:"center"},"Label"),r.a.createElement(g.a,{align:"center"},"Actions"))),r.a.createElement(k.a,null,u.map((function(e,n){return r.a.createElement(v.a,{key:n,hover:!0,onClick:function(){return function(e){u[e].selected=!u[e].selected,m(Object(s.a)(u))}(n)},role:"checkbox","aria-checked":e.selected,tabIndex:-1,selected:e.selected},r.a.createElement(g.a,{padding:"checkbox"},r.a.createElement(w.a,{checked:e.selected})),r.a.createElement(g.a,{align:"center"},e.data.label),r.a.createElement(g.a,{align:"center"},r.a.createElement(E.a,{variant:"text",color:"primary","aria-label":"text primary button group"},r.a.createElement(C.a,{id:"action-edit",color:"primary","aria-label":"Edit",component:"span",onClick:function(e){return function(e,n){e.stopPropagation(),R(n),F(u[n].data),a(!0)}(e,n)}},r.a.createElement(x.a,null)),r.a.createElement(C.a,{color:"primary","aria-label":"Remove",component:"span",onClick:function(e){return function(e,n){e.stopPropagation();var t=u.slice(0,n)||[],a=u.slice(n+1)||[];m([].concat(Object(s.a)(t),Object(s.a)(a)))}(e,n)}},r.a.createElement(O.a,null)))))}))))),r.a.createElement(ye,{initialData:I,open:t,onClose:function(){return a(!1)},onSubmit:function(e){P<0||P>=u.length?m([].concat(Object(s.a)(u),[new ge(e.clone())])):(u[P]=new ge(e.clone()),m(Object(s.a)(u))),a(!1)}}),r.a.createElement(j.a,{onClick:function(){R(-1),a(!0)}},"Add"),r.a.createElement(j.a,{onClick:function(){var e=encodeURI("data:text/csv;charset=utf-8,"+function(e){var n=[],t={},a=0;function r(e){var n={};return function e(r,o){if(r)for(var i in r){var u="".concat(o,".").concat(i),c=r[i],l=null;"function"===typeof c.toCSV?l=c.toCSV():Array.isArray(c)||("object"===typeof c?e(c,u):l="function"===typeof c.toString?c.toString():c),l&&(n[u]=l,u in t||(t[u]=a,a++))}}(e,""),n}var o,i=Object(L.a)(e);try{for(i.s();!(o=i.n()).done;){var u=r(o.value),c=new Array(a);for(var l in u){c[t[l]]=u[l]}n.push(c)}}catch(s){i.e(s)}finally{i.f()}return Object.keys(t).join(",")+"\n"+n.map((function(e){return e.join(",")})).join("\n")}(u.map((function(e){return e.data}))));window.open(e)}},"Download as CSV"),r.a.createElement("input",{accept:"text/csv",id:"contained-button-file",type:"file",onChange:function(e){return N.apply(this,arguments)}}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(j.a,{variant:"contained",color:"primary",component:"span"},"Load CSV")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[287,1,2]]]);
//# sourceMappingURL=main.0b828a17.chunk.js.map